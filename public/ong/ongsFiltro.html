<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UneONG - Filtro de ONGs</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../css/partials/navbar.css" />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/pages/filtro/filtro.css" />
    <link rel="stylesheet" href="../css/pages/filtro/modal-filtro.css" />
  </head>

  <body>
    <header>
      <nav class="navbar" style="width: 100%">
        <div
          class="flex"
          style="justify-content: flex-start; width: 100%; gap: 1.5rem"
        >
          <div style="line-height: 50px">
            <button class="hamburger" id="hamburger"></button>
          </div>
          <ul class="nav-links" id="navlinks">
            <li><a href="feed.html">Explorar</a></li>
            <li><a href="ongsFiltro.html">ONGs</a></li>
          </ul>
          <a class="nav-title" href="../ong/feed.html"
            ><img
              src="../assets/svg/Logo UneONG FINAL.svg"
              alt=""
              width="80"
              height="80"
          /></a>
        </div>

        <input type="text" name="txtbuscar" id="txtbuscar" class="buscar" placeholder="Procure uma ong..." />
        <label for="txtbuscar"><img src="../assets/png/icones/icone_buscar.png" class="buscarIcon" alt=""></label>

        <div
          class="nav-elements"
          style="width: 100px; justify-content: flex-end; padding-left: 1rem"
        >
          <div class="icon-menu">
            <img
              src="../assets/png/user-example.png"
              alt=""
              id="dropdown-perfil"
            />
          </div>
          <div class="dropdown" id="dropdownMenu">
            <div class="flex" style="width: 100%">
              <img
                class="foto-perfil"
                src="../assets/jpg/foto-perfil-exemplo.jpg"
                alt=""
                id="foto_perfil"
              />
              <div class="mn-part1">
                <p class="name-account" id="txtnomeOng">Cartinha Mágica</p>
                <p class="email-account" id="txtemailOng">cartinhamagica@gmail.com</p>
                <a class="perfil-account" href="perfil.html">Seu perfil ➞</a>
              </div>
            </div>
            <div class="mn-part2">
                        <ul>
                            <li><a href="configuracoes.html"><img src="../assets/png/icones/icone_configuracoes.png" alt="" style="width: 25px; margin-right: 7px; vertical-align: middle;">Configurações</a></li>
                        </ul>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <div id="overlay"></div>

    <main>
      <!-- Container do filtro -->
      <div class="filtro-container">
        <div class="filter-tabs">
          <!-- Modal de A a Z -->
          <button class="filter-btn" data-open="modal-az">A - Z</button>
          <dialog id="modal-az">
            <div class="modal-header">
              <h1 class="modal-title">Selecionar filtro</h1>
              <button class="close-modal-filtro" data-close="modal-az">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <div class="modal-body">
              <div class="buttons-filtro">
                <button
                  class="btn-crescente"
                  id="btn_crescente"
                  role="radio"
                  aria-checked="true"
                  tabindex="0"
                >
                  De A a Z
                </button>
                <button
                  class="btn-decrescente"
                  id="btn_decrescente"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  De Z a A
                </button>
              </div>

              <div class="atention">
                <h4>Atenção:</h4>
                <span
                  >Essa ação limpará os campos preenchidos anteriormente.</span
                >
              </div>

              <div class="modificar-filtro">
                <button class="btn-cancelar" data-cancel="modal-az">
                  Cancelar
                </button>
                <button class="btn-alterar" data-aplicar="az">Alterar</button>
              </div>
            </div>
          </dialog>

          <!-- Modal de Localização -->
          <button class="filter-btn" data-open="modal-localizacao">
            Localização
          </button>
          <dialog id="modal-localizacao">
            <div class="modal-header">
              <h1 class="modal-title">Selecionar filtro</h1>
              <button class="close-modal-filtro" data-close="modal-localizacao">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <div class="modal-body">
              <div class="buttons-filtro">
                <button
                  class="btn-filtro"
                  id="btn_itu"
                  role="radio"
                  aria-checked="true"
                  tabindex="0"
                  data-filtro="Itu"
                >
                  Itu
                </button>
                <button
                  class="btn-filtro"
                  id="btn_indaiatuba"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Indaiatuba"
                >
                  Indaiatuba
                </button>
                <button
                  class="btn-filtro"
                  id="btn_sorocaba"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Sorocaba"
                >
                  Sorocaba
                </button>
                <button
                  class="btn-filtro"
                  id="btn_salto"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Salto"
                >
                  Salto
                </button>
                <button
                  class="btn-filtro"
                  id="btn_jundiai"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Jundiai"
                >
                  Jundiaí
                </button>
                <button
                  class="btn-filtro"
                  id="btn_boituva"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Boituva"
                >
                  Boituva
                </button>
                <button
                  class="btn-filtro"
                  id="btn_portofeliz"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Porto Feliz"
                >
                  Porto Feliz
                </button>
                <button
                  class="btn-filtro"
                  id="btn_tiete"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Tiete"
                >
                  Tietê
                </button>
                <button
                  class="btn-filtro"
                  id="btn_cabreuva"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Cabreuva"
                >
                  Cabreúva
                </button>
                <button
                  class="btn-filtro"
                  id="btn_outracidade"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                  data-filtro="Outros"
                >
                  Outros
                </button>
              </div>
            </div>

            <div class="atention">
              <h4>Atenção:</h4>
              <span
                >Essa ação limpará os campos preenchidos anteriormente.</span
              >
            </div>

            <div class="modificar-filtro">
              <button class="btn-cancelar" data-cancel="modal-localizacao">
                Cancelar
              </button>
              <button class="btn-alterar" data-aplicar="cidade">Alterar</button>
            </div>
          </dialog>

          <!-- Modal de categorias -->
          <button class="filter-btn" data-open="modal-categoria">
            Categoria
          </button>
          <dialog id="modal-categoria">
            <div class="modal-header">
              <h1 class="modal-title">Selecionar filtro</h1>
              <button class="close-modal-filtro" data-close="modal-categoria">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <div class="modal-body">
              <div
                class="buttons-filtro"
                role="radiogroup"
                aria-label="Selecionar categoria"
              >
                <button
                  class="btn-filtro"
                  id="btn_Cultura"
                  data-filtro="Cultura"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Cultura
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Educacao"
                  data-filtro="Educação"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Educação
                </button>
                <button
                  class="btn-filtro"
                  id="btn_MeioAmbiente"
                  data-filtro="Meio Ambiente"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Meio Ambiente
                </button>
                <button
                  class="btn-filtro"
                  id="btn_LGBT+"
                  data-filtro="LGBT+"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  LGBT+
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Saude"
                  data-filtro="Saúde"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Saúde
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Animal"
                  data-filtro="Animal"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Animal
                </button>
                <button
                  class="btn-filtro"
                  id="btn_BaixaRenda"
                  data-filtro="Baixa Renda"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Baixa Renda
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Indigenas"
                  data-filtro="Indígenas"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Indígenas
                </button>
                <button
                  class="btn-filtro"
                  id="btn_PCD"
                  data-filtro="PCD"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  PCD
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Idosos"
                  data-filtro="Idosos"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Idosos
                </button>
                <button
                  class="btn-filtro"
                  id="btn_DireitosHumanos"
                  data-filtro="Direitos Humanos"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Direitos Humanos
                </button>
                <button
                  class="btn-filtro"
                  id="btn_EsporteLazer"
                  data-filtro="Esporte e Lazer"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Esporte e Lazer
                </button>
                <button
                  class="btn-filtro"
                  id="btn_Outros"
                  data-filtro="Outros"
                  role="radio"
                  aria-checked="false"
                  tabindex="-1"
                >
                  Outros
                </button>
              </div>

              <div class="atention">
                <h4>Atenção:</h4>
                <span
                  >Essa ação limpará os campos preenchidos anteriormente.</span
                >
              </div>

              <div class="modificar-filtro">
                <button class="btn-cancelar" data-cancel="modal-categoria">
                  Cancelar
                </button>
                <button class="btn-alterar" data-aplicar="categoria">
                  Alterar
                </button>
              </div>
            </div>
          </dialog>
        </div>
        <!-- Lista de ONGs -->
        <div class="ongs-container">
          <div class="ongs-list">
            <p>Amarati - Jundiaí</p>
            <p>Associação Casa da Criança - Salto</p>
            <p>Associação de Pais e Amigos (APAE) - Salto</p>
            <p>Cartinha Mágica - Itu</p>
            <p>Amarati - Jundiaí</p>
            <p>Associação Casa da Criança - Salto</p>
            <p>Associação de Pais e Amigos (APAE) - Salto</p>
            <p>Cartinha Mágica - Itu</p>
          </div>
          <div class="ongs-list">
            <p>Mais Vida - Centro de Apoio - Itu</p>
            <p>Serviço de Obras Sociais (SOS) - Jundiaí</p>
            <p>Rever Cidadania - Indaiatuba</p>
            <p>Mais Vida - Centro de Apoio - Itu</p>
            <p>Serviço de Obras Sociais (SOS) - Jundiaí</p>
            <p>Rever Cidadania - Indaiatuba</p>
          </div>
        </div>
      </div>
    </main>

    <div id="modalsairconta" Open>
      <div class="modal-header">
        <h1 class="modal-title">Sair</h1>
        <button class="close-modal" id="fecharSaida">X</button>
      </div>

      <div class="modal-body">
        <div class="desc-sairconta">
          <span>Você tem certeza que deseja sair da conta? </span>
        </div>

        <div class="opcoes-sairconta">
          <button id="btn-cancelar-sairconta">Cancelar</button>

          <button id="btn-sair-sairconta">Sair</button>
        </div>
      </div>
    </div>

    <script>
      window.onload = async () => {
      try {
        const res = await fetch("/api/config", {
          method: "GET",
          credentials: "include" // necessário para enviar o cookie da sessão
        });
        const data = await res.json();

        if (!res.ok) {
          alert(data.err);
          // redireciona
          window.location.href = "../cadastros/login-ong.html";
          return;
        }

        

        
        document.getElementById("txtnomeOng").textContent = data.nome_ong;
                document.getElementById("foto_perfil").src = data.foto_perfil_ong;
        document.getElementById("txtemailOng").textContent = data.email_ong;
        
        console.log(data);
      } catch (err) {
        console.error("Erro ao carregar dados:", err);
      }
    };
      // Alterna botão ativo
      const buttons = document.querySelectorAll(".filter-btn");
      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          buttons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
        });
      });
    </script>

    <script src="../js/modals/modalsFiltro.js"></script>
    <script src="../js/funcionalidades.js"></script>
  </body>
</html>
